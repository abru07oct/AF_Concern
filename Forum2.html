<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Associate Forum – Raise Your Concern</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: Arial, sans-serif; background:#f7f7f7; padding:24px; }
  .container { max-width:820px; margin:auto; background:#fff; padding:26px; border-radius:8px; }
  h1 { margin:0 0 8px; font-size:22px; }
  label { font-weight:600; }
  input, select, textarea {
      width:100%; padding:10px; margin-top:6px; margin-bottom:14px;
      border:1px solid #ccc; border-radius:6px; font-size:14px;
  }
  textarea { height:160px; }
  button {
      background:#0366d6; color:#fff; border:none; padding:12px 18px;
      border-radius:6px; cursor:pointer; font-weight:600;
  }
  .secondary { background:#ddd; color:#000; }
</style>
</head>

<body>
<div class="container">

<h1>ASSOCIATE FORUM</h1>
<p>Raise your concern.</p>

<form id="forumForm" onsubmit="return handleSubmit(event)">

  <label>Name of Associate</label>
  <input type="text" id="name" required>

  <label>Login ID</label>
  <input type="text" id="login" required>

  <label>Date</label>
  <input type="date" id="date" required>

  <label>Department</label>
  <select id="department" required>
    <option value="">-- Select Department --</option>
    <option>C-Rets</option>
    <option>Pack</option>
    <option>Pick</option>
    <option>Stow</option>
    <option>Shipping</option>
    <option>VNA</option>
    <option>Others</option>
  </select>

  <label>Send Anonymously?</label>
  <select id="anon">
    <option>No</option>
    <option>Yes</option>
  </select>

  <label>Concern</label>
  <textarea id="concern" required></textarea>

  <button type="submit">Submit Concern</button>

</form>

</div>

<script>
// Auto-fill date
(function () {
  const d = new Date();
  const yyyy = d.getFullYear();
  const mm = String(d.getMonth() + 1).padStart(2, '0');
  const dd = String(d.getDate()).padStart(2, '0');
  document.getElementById('date').value = `${yyyy}-${mm}-${dd}`;
})();

function handleSubmit(e) {
  e.preventDefault();

  const name = document.getElementById('name').value.trim();
  const login = document.getElementById('login').value.trim();
  const date = document.getElementById('date').value;
  const dep = document.getElementById('department').value;
  const anon = document.getElementById('anon').value;
  const concern = document.getElementById('concern').value.trim();

  const displayName = anon === "Yes"
      ? "Anonymous"
      : name;

  // ------------------------------
  // FORMAT EMAIL TO FORUM
  // ------------------------------
  const bodyForum =
`ASSOCIATE FORUM SUBMISSION

────────── ASSOCIATE DETAILS ──────────
Name: ${displayName}
Login ID: ${login}
Department: ${dep}
Date: ${date}

───────────── CONCERN ─────────────
${concern}

────────────────────────────────────
Thank you.
`;

  const mailtoForum =
    "mailto:cwl1-forum@amazon.com"
    + "?subject=" + encodeURIComponent("New Concern – " + displayName)
    + "&body=" + encodeURIComponent(bodyForum);

  // ------------------------------
  // AUTO-REPLY TEMPLATE TO ASSOCIATE
  // ------------------------------
  const confirmationBody =
`Hi ${anon === "Yes" ? "Associate" : name},

Thanks for raising your concern. 
We will reach you out with an update.

Regards,
Associate Forum Team`;

  const mailtoAssociate =
    "mailto:" + login +
    "?subject=" + encodeURIComponent("Acknowledgement – Concern Received") +
    "&body=" + encodeURIComponent(confirmationBody);

  // Open forum mail first
  window.location.href = mailtoForum;

  // Then auto-open confirmation email after 1 second
  setTimeout(() => {
    window.location.href = mailtoAssociate;
  }, 1200);

  return false;
}
</script>

</body>
</html>
